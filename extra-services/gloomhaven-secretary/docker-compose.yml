version: "3.9"

services:
  gloomhaven:
    container_name: gloomhaven
    build: https://github.com/Lurkars/gloomhavensecretary.git#main
    image: gloomhavensecretary

    ports:
      - ${PORT_GHS_CLIENT}:80

    labels:
      - "diun.enable=true"

    deploy:
      resources:
        limits:
          cpus: '1'
          memory: 128M
    restart: unless-stopped

  gloomhaven-server:
    container_name: gloomhaven-server
    build: https://github.com/Lurkars/ghs-server.git#main
    image: gloomhavensecretary-server

    ports:
      - ${PORT_GHS_SERVER}:8080

    labels:
      - "diun.enable=true"

    deploy:
      resources:
        limits:
          cpus: '1.5'
          memory: 512M
    restart: unless-stopped